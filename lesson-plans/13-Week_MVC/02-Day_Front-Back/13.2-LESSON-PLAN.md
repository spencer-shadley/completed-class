# 13.2 Lesson Plan: Bringing it from the Front to the Back

## Overview

Slack out this link before class - https://www.restapitutorial.com/lessons/whatisrest.html#

Express + Handlebars + MySQL to create a full-stack application (front-end, back-end and DB) supporting all CRUD operations

### Ins: Welcome Students and Demo the Warm Up

- 630-35 (5 min)

- Welcome your students to class

### Stu: Handlebars Animals

- 635-55 (20 min)

- `npm install`

- `npm run watch`

- demo

  - http://localhost:3000/dog
  - http://localhost:3000/all-pets
  - http://localhost:3000/all-non-pets

### Ins: Review

- 655-710 (15 min)

- live code

### Ins: In Need of Some REST

- 710-20 (10 min)

- REST (Representational State Transfer) is a style of architecture which sets constraints for creating web services
- Web services conforming to REST are called RESTful
- It defines standards on how to interact with a web service
- Six constraints

  - _Uniform Interface_
    - URIs to identify
    - server sends standard representations of the db
    - sufficient information to process such as encoding or MIME type
  - _stateless_
    - the necessary state to handle the request is contained within the request such as in the URI, parameters or body
  - _cacheable_
    - clients can cache responses and responses must define themselves as cacheable
  - _separate the server and client_
    - separation of concerns - clients don't care about data storage and servers don't care about user interface
  - _layered system_
    - intermediary connections are allowed. A client cannot tell if it is connected to an end server or something between it such as load-balancer
  - _code on demand (optional)_
    - Servers can customize the client code by transferring logic to it that it can execute such as JavaScript or Java applets

- HTTP is a tool used to comply with this architecture, it enables building RESTful architecture

  - in itself it is not RESTful, it is a protocol for sending data which, when the six conditions above are met, can be used to create a RESTful application

- Today we will build a RESTful service using HTTP

- Describe GET, POST, PUT and DELETE

### Ins: 07-TaskSaver

- 720-35 (15 min)

- server which reads data from a DB and allows POSTing new data to it

- run `schema.sql`

- demo the app

- start with `server.js`

- `main.handlebars`

- `index.handlebars`

- show the network request in Chrome (explain 3XX means success with no content returned)

- `express.json` and `express.urlEncoded` are used for `req.body.task`

- the `textarea` sets up a key (`name="task"`) for the POST data

### Stu: 08-Wishes

- 735-55 (20 min)

- demo app, then let them build it

### BREAK

- 745-8 (15 min)

### Ins: Revew

- 830-45 (15 min)

- debug

  - Settings > search "Node debug" > turn on auto-attach
  - `node --insepct server`
  - `npm run debug`

- Open up the `08-Wishes` folder and its files within your editor, and go over the code line-by-line with your class, making sure to explain what is happening within your code to the best of your ability.

### Ins: Putting and Deleting

- 845-905 (20 min)

- Open up the `09-DayPlanner` folder within your editor and within your terminal, running `npm install` before running `server.js` and opening up the application within your browser to demonstrate how the application works.

- Point out how we create PUT and DELETE routes with Express.

- Point out how to use jQuery to send PUT and DELETE requests (and that there are no shorthand methods available like for GET and POST).

### Partners: Going Over the Day Planner

- 905-20 (15 min)

- Slack out `09-DayPlanner` to your students, have them run the application on their computers, and then have them explain the code to their partners line-by-line.

### Everyone Do: Watch List

- 920-40 (20 min)

- Once everyone seems to have finished picking their way through the code and you have answered whatever questions your students may have had, slack out the following instructions found in `10-WatchList/README.md` file.

  # Instructions

  - Create a full-stack application with Express, MySQL and Handlebars.

    - HINT: this web application will be very similar to the app your instructor just demonstrated and slacked out. Please feel free to leverage that code when creating this code.

  - Create a `schema.sql` file. Inside of that file, do the following:

    1. Make a database called moviePlannerDB

    2. Inside of that database make a movies table which will contain a movie column and an id column. The id will be automatically incremented while also being the primary key.

    3. Run your `schema.sql` file within MySQL Workbench before moving onto the next steps.

  - In your server.js file, you will create four routes: `get`, `post`, `put`, and `delete`.

    - Render the main `index.handlebars` when the `'/'` get route is hit with all of the movies from the movies table.

    - Your application should have a set of routes on `'/movies'` for create, update, and delete operations on the movies table.

    - Show a delete button next to each movie. When one of the delete buttons is clicked, the code should send a DELETE request to delete the associated movie from your database.

    - Additionally, show the form that the user can use to add a movie to be watched. When the submit button is clicked, the code will post to the `'/movies'` route, which will insert the movie from the form into the movies table and return the ID of the new movie.

    - Have another form that will update a movie in the movies table. The form will include two inputs: an id input and a movie title input. Remember to leverage a PUT method.

    - Remember: best practices for REST include:
      - Put your REST API on it's own URL (e.g. `'/todos'`).
      - A POST that creates an item should return the ID of the item it created.
      - PUT and DELETE should specify the ID of the item they're intended to affect in the URL (e.g. `'/todos/123'`).
      - If the ID for the item specified in a PUT or DELETE couldn't be found, return a 404.
      - If an error occurs in the server, return an error code (e.g. 500).

### Everyone do

- 940-55 (15 min)

- Open up the `10-WatchList/Solved` folder and its files within your editor, and go over the code line-by-line with your class, making sure to explain what is happening within your code to the best of your ability.
