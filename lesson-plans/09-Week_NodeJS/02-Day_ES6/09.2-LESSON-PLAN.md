# 9.2 - Node and ES6 Day 2

## Overview

TODO: include fetch

In this class, we will be building on students' proficiency with Node by introducing them to additional ES6 features that they will be using in Node.

## Instructor Notes

## Learning Objectives

- Identify and implement how and when to use arrow functions
- Identify and implement how and when to use let and const variables
- Identify and destructuring of arrays, functions and objects in ES6
- Identify and implement how and when to use template literals
- Identify and apply for...of loops
- Identify and implement rest and spread syntax
- Identify and apply array methods forEach, filter and map

### Instructor Do: 16-Ins_ArrowFunction

- 630-40 (10 min)

- Explain ES6 is an update to ECMAScript which is what JS is based on

  - QWERTY is a layout standard for keyboards
  - ECMA is a standard. JavaScript is written to comply to the ECMA standard with some additions.
  - JavaScript engines are created for each browser (V8 in Chrome and Node, SpiderMonkey in FF)

    - the engine knows how to actually perform the capabilities in the specification.
    - multiple engines may know how to "jump" but one may implement it more efficiently
    - JavaScript runtime is the system running the engine (in a browser there is a window object)

  - https://caniuse.com/#search=es6

    - Intl.PluralRules API (no safari)
    - WebXR Device API (only chrome)

  - demo arrow functions - write `01-syntax` by hand

- Now walk through the first part of the code in [02-context.js].

  - `setTimeout` changes the context in which it is being run. `this` stops referring to `person`

  - need to bind `this` using an arrow function

    - arrow functions automatically bind to the context or object it's created inside of even if it's not a property of that object

    - arrow functions inherit `this` from the context in which they're created

  - I help people a lot with this binding issue

  - we could resolve this issue by using `.bind(this)`

- [03-arrow-property-methods.js]

  - arrow functions bind to window scope in object declaration

  - generally use arrow functions with the exception of properties on an object

  - arrow functions are also missing `bind`, `call` and `apply` (methods on the Function proto)

- ### Student Do: 17-Stu_ArrowFunctionPractice

- 640-50 (10 min)

- convert `function` syntax to arrows where applicable

### Instructor Do: Review

- 650-55 (5 min)

- mention code golf

### Instructor Do: 18-Ins_LetAndBlockScope

- 655-705 (10 min)

- introduce `let`

- ask: someone explain scope (specifically in a function)

- `let` and `const` are block scoped

- forces you to be clear and explicit about the expectation on how a variable will be used

- never use `var` again. Ever!

- ### Instructor Do: 19-Ins_ConstantReference

- 705-15 (10 min)

- goes over `const`

- one additional change to `let` - the variable reference cannot be changed

- this helps prevent reassigning values we didn't mean to, expresses intent and self-documents the code

- each reference to a primitive type creates a new value to refer to in memory when modified

- ask: why is the last example not allowed?

- go back overview of:

  - `let` when a reference is going to be changed
  - `const` when it won't ever be changed

### Student Do: 20-Stu_ConvertConstLetArrow

- 715-25 (10 min)

- Based on Crystal guessing game, convert to use ES6

- mention they don't need to understand the code

### Instructor Do: Review

- 725-30 (5 min)

- ask why `let` and why `function` each time they appear

- if opened it's the same

### Instructor Do: 21-Ins_FunctionalLoops

- 730-40 (10 min)

- introduces `forEach`, `filter` and `map`

### Student Do: 22-Stu_FunctionalLoops

- 740-50 (10 min)

- try out `map` and `filter`

- bonus is to play code golf

### Instructor Do: Review

- 750-55 (5 min)

- "When's a time in real life when you need to _filter_ through something?"

  - When looking for a word in the dictionary, you're _filtering_ out all the words that don't contain the same letters as the one you're looking for.

  - When shopping for pants, you're _filtering_ out all the ones on the rack that aren't your size.

  - When you're looking for your friend in a crowd, you're _filtering_ out everyone that doesn't look like them.

- "When's a time in real life when you need to _map_ over something?"

  - When you're _mapping_ through your todolist and marking off all the things you've completed for the day.

  - When you're _mapping_ through your laundry pile, categorizing your clothes so you can put them into the correct drawers.

- Explain that just like how we need to map and filter over things in real life, we often need to in code as well.

- ### BREAK

- 755-810

- (15 min)

### Instructor Do: 23-Ins_Template_Literals

- 810-15 (5 min)

- Template literals let you have multi-line strings with embedded code (interpolation) using the backtick

### Student Do: 24-Stu_Template_Literals

- 815-25 (10 min)

- create an object and use template literals to create a nice HTML string

### Instructor Do: Review

- 825-30 (5 min)

- We will keep practicing this

### Instructor Do: 25-Ins_For_Of

- 830-35 (5 min)

- introduce for..of

- can be used for iterables such as strings, arrays, maps, sets and typedarrays

- `forEach` is limited to arrays

- `for in` has issues and is generally considered bad practice

### Student Do: For...Of

- 835-45 (10 min)

- TODO: left off here

### Instructor Do: Review

- 845-50 (5 min)

- Review the previous activity.

- If time permits, feel free to expand and show other use cases for `for...of`.

- They syntax is relatively straightforward, the key takeaway is knowing when to use and and what to use it for.

### Instructor Do: Rest and Spread Demo

- 850-55 (5 min)

- Students will now be introduced to the spread and rest syntax available in ES6.

- Open [12-Ins_Spread_and_Rest/index.js] and step through the code.

#### Rest Parameters

- Explain that the rest parameter collects all remaining elements into an array.

- Be sure to point out that a rest paramter has to be the last argument in an array.

```js
function add(x, y) {
  return x + y;
}

console.log(add(1, 2, 3, 4, 5)); // => 3
```

- Ask the class why they think the `add` function returned 3?

- Explain that although it is possible to call a function with any number of arguments, only the fist two arguments will be counted.

- Let's rewrite this function using a rest operator.

```js
function add(...nums) {
  let sum = 0;
  for (let num of nums) sum += num;
  return sum;
}

add(1); // => 1
add(3, 3); // => 6
add(1, 1, 4, 5); // => 11
```

- In this example, we use a rest operator to collect all of the arguments into a `nums` array, giving us the ability to pass in as many arguments as we want.

- Let's try another one.

```js
function howManyArgs(...args) {
  return `You passed ${args.length} arguments.`; // point out the template literal
}

console.log(howManyArgs(0, 1)); // You have passed 2 arguments.
console.log(howManyArgs('argument!', null, ['one', 2, 'three'], 4)); // You have passed 4 arguments.
```

- The takeaway here is these variables are now available in an array inside our function, we can also pass in as many as we want.

#### Spread Operator

- The spread operator allows iterables such as arrays, objects and strings to be expanded into single arguments or elements.

- Run the following example for students.

```js
// Spread Operator

let dragons = ['Drogon', 'Viserion', 'Rhaegal'];
let weapons = ['dragonglass', ...dragons, 'wildfire']; // notice the spread operator ...dragons

console.log(weapons); // prints ["dragonglass", "Drogon", "Viserion", "Rhaegal", "wildfire"]
```

- Here you can see that we have expanded both arrays into a new array with all of the elements.

- Explain that there are a lot of use cases for rest and spread and they will continue to get more practice with them as the progress in the course.

- Take any clarifying questions before moving on.

### Student Do: Rest and Spread Syntax

- 855-905 (10 min)

### Instructor Do: Review

- 905-10 (5 min)

- Open [Solved/index.js] and step through the code.

- This first part is relatively straightforeward, but check for understanding to see if there are any hangups for students.

```js
const songs = ['Creep', 'Everlong', 'Bulls On Parade', 'Song 2', 'What I Got'];
const new_songs = [...songs];

console.log(new_songs); // => ["Creep", "Everlong", "Bulls On Parade", "Song 2", "What I Got"];
```

- This one might have been a little tricky for students. There is a chance that they have not seen `reduce` before, so take a second to explain what it does. A

- Let students know that it's very common to be introduced to new methods, functions and concepts on the job and they should embrace the uncertainty of new material.

```js
// unsolved version
function addition(x, y, z) {
  const array = [x, y, z];
  return array.reduce((a, b) => a + b, 0);
}
console.log(addition(1, 2, 3)); // 6

// solved using rest
function addition(...array) {
  return array.reduce((a, b) => a + b, 0); // you don't have to change this line of code but look up reduce if you're not sure what it does here https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce
}
console.log(addition(1, 2, 3)); // 6
console.log(addition(1, 2, 3, 4, 100)); // 110
```

- There is a good chance that students will be confused on where spread and operators go, since they are very similar and can be used in similar situations.

- Let them know that this is just an introduction and they will begin to pick up fluency as they get more practice.

- Take any remaining questions before moving on.

### Instructor Do: Object Destructuring

- 910-20 (10 min)

- In this example, students will be introduced to the ES6 object destructuring syntax.

- Explain that object destructuring is a way for us to pull properties off of an object an onto separate variables for easier access. We can achieve this without ES6, but now we have a newer shorthand for doing so.

- Go through each example inside of [index.js].

  - Highlight how we can destructure multiple object properties at once, saving us a few lines of code.

  - Demonstrate how this is also possible with function parameters. This allows us to have named function parameters i.e. if we passed multiple values into a function one at a time, we'd need them to be passed in the specific order intended. Now we can simply expect an object and pull the properties off without worrying about the order they're passed in or write extra code to destructure them the old way.

### Student Do: Object Destructuring

- 920-30 (10 min)

### Instructor Do: Review

- 930-35 (5 min)

- Open [Solved/index.js] in your editor and walk students through the solved exercise.
