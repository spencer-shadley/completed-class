<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>The Magical Cat Button</title>
  </head>

  <body>
    <form>
      <input id="tag-input" placeholder="Enter a tag" />
      <button id="retrieve-gifs-button">cats</button>
    </form>
    <div id="images"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
      var gifsButton = $('#retrieve-gifs-button');
      var tagInput = $('#tag-input');

      tagInput.on('keydown', function() {
        window.setTimeout(function() {
          gifsButton.text(tagInput.val() || 'cats');
        }, 100);
      });

      $('form').on('submit', function(event) {
        event.preventDefault();

        // Storing our giphy API URL for a random cat image
        var queryURL =
          'https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC';

        // Perfoming an AJAX GET request to our queryURL
        $.ajax({
          url: queryURL + '&tag=' + gifsButton.text(),
          method: 'GET'
        })

          // After the data from the AJAX request comes back
          .then(function(response) {
            // Saving the image_original_url property
            var imageUrl = response.data.image_original_url;

            // Creating and storing an image tag
            var image = $('<img>');

            // Setting the image src attribute to imageUrl
            image.attr('src', imageUrl);
            image.attr('alt', 'image of ' + gifsButton.text());

            // Prepending the image to the images div
            $('#images').prepend(image);
          });
      });
    </script>
  </body>
</html>
