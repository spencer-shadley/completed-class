# 6.2 - Advanced AJAX

## Overview

In this class, students will be building upon their knowledge of AJAX to retrieve data via the OMDb api and display data onto an HTML page.

`Summary: Complete activities 5-11 in Unit 6`

- Use the slideshow as an initial starting point for your conversation on APIs. Make sure that students see the power of APIs and understand how APIs provide a link between front-end (what they've learned so far) and backend (what they will soon be learning).

- Today's activities will feel pretty challenging and confusing to the majority of your students.

## Learning Objectives

- To solidify understanding of APIs, JSONs, and their roles in full-stack web development

- To increase comfort working with APIs and AJAX calls in data-rich applications

### Instructor Do: API and AJAX Slidedeck

- 630-42 (12 min)

- Open deck

### Students Do: 05-Bujumbura

- 642-57 (15 min)

- retrieves weather data and displays it

### Instructor Do: Review 05-Bujumbura

- 657-702 (5 min)

  - Ask students how you would recycle the code shown to instead find the weather in `London`. (Answer: Just change the `queryURL`)

- Ask students why all of the code needed to be inside the `.then` function

### Instructor Do: 10-WorkingMovieApp

- 702-07 (5 min)

* Today's class we will be working towards building this

* In demonstrating this application:

  - Click on the existing buttons to show that movies are displayed.

  - Create a new movie to the listing, point out that a button was generated dynamically, and that this button becomes a clickable AJAX caller of its own.

### Students Do: 06-MovieJSONDump

- 707-17 (10 min)

* Retrieve movie as JSON. This movie is then appended directly into the HTML as is.

### Instructor Do: Review 06-MovieJSONDump

- 717-22 (5 min)

* Review the JSON Dump activity. In your discussion be sure to point out:

  - The standard `AJAX` syntax of capturing both `queryURL` and `GET` method.

  - Point out the use of `JSON.stringify(response)` for converting the retrieved JSON into a string that can be put placed into text.

### Students Do: 07-MovieButtonLayout

- 722-47 (25 min)

### Instructor Do: Review 07-MovieButtonLayout

- 747-57 (10 min)

  - The `renderButtons` function is looping through the `movies` array and creating a jQuery element for each.

  - Pay special attention to the syntax for jQuery's creation of dynamic elements.

  - Point out that the `.on("click")` event tied to the button is what triggers re-rendering of the movies array

  - Ask students why the `#buttons-view` needed to be emptied in the `renderButtons` function(Answer: otherwise content will get replicated each time you click a button).

### Students Do: 08-LogMovieName and 09-ClickJSON

- 757-817 (20 min)

- [08-LogMovieName]

  - Point out that, with this app, clicking any of the buttons &mdash; either new or old &mdash; will trigger an alert message listing out the movie name.

- [09-ClickJSON]

  - Point out that, with this app, clicking any of the buttons &mdash; either new or old &mdash; will cause a JSON dump of the movie to appear. Be sure to point out that the code works for both the original buttons _and_ the newly created buttons.

### Instructor Do: Review 08-LogMovieName and 09-ClickJSON

- 817-27 (10 min)

* Review [08-LogMovieName/Solved]

* Review [09-ClickJSON]

  - Be sure to emphasize how we used the same `stringify` method in both solutions.

* In your discussion, be sure to point out

  - How we used data attributes to retrieve the "name" of each movie;

    - Also point out how we used an alternative `.on("click")` event. Instead of using an `.on("click")` event associated with our buttons, we created one that was associated with the `document`. This was necessary to ensure that the dynamically created elements were bound to jQuery.

  - Demonstrate how the app would function with both sets of event syntax.

### BREAK

- 827-42 (15 min)

### Students Do: 10-WorkingMovieApp

- 842-907 (25 min)

### Instructor Do: Review 10-WorkingMovieApp

- 907-12 (5 min)

* Point out how this application's code basically consists of an AJAX call which retrieves data from the OMDb API, parses it, then displays it inside of an HTML element.

### Students Do: 11-BandsInTownApp (OPTIONAL)

- 912-32 (20 min)

### Instructor Do: Review 11-BandsInTownApp (OPTIONAL)

- 932-37

- Review the Bands In Town code. Be sure to point out how the `app_id` is required but can be anything, and point out how the logged JSON response relates to the new HTML on the page.
