(this.webpackJsonpcms=this.webpackJsonpcms||[]).push([[0],{30:function(e,t,a){e.exports=a(59)},54:function(e,t,a){},55:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(6),l=a(9),r=a(4);var c=a(0),o=a.n(c);function s({fluid:e,children:t}){return o.a.createElement("div",{className:"container".concat(e?"-fluid":"")},t)}function m({fluid:e,children:t}){return o.a.createElement("div",{className:"row".concat(e?"-fluid":"")},t)}function i({size:e,children:t}){return o.a.createElement("div",{className:e.split(" ").map(e=>"col-".concat(e)).join(" ")},t)}var u=a(12),E=a.n(u),d={getPosts:()=>E.a.get("/api/posts"),getPost:e=>E.a.get("/api/posts/".concat(e)),deletePost:e=>E.a.delete("/api/posts/".concat(e)),savePost:e=>E.a.post("/api/posts",e)};var p=function({children:e}){return o.a.createElement("div",{style:{height:560,clear:"both",paddingTop:120,textAlign:"center"},className:"jumbotron border border-success"},e)},b=a(29),v=a(8);const f=Object(c.createContext)(),h=f.Provider,g=(e,t)=>{switch(t.type){case"SET_CURRENT_POST":return Object(v.a)({},e,{currentPost:t.post,loading:!1});case"UPDATE_POSTS":return Object(v.a)({},e,{posts:[...t.posts],loading:!1});case"ADD_POST":return Object(v.a)({},e,{posts:[t.post,...e.posts],loading:!1});case"REMOVE_POST":return Object(v.a)({},e,{posts:e.posts.filter(e=>e._id!==t._id)});case"ADD_FAVORITE":return Object(v.a)({},e,{favorites:[t.post,...e.favorites],loading:!1});case"UPDATE_FAVORITES":return Object(v.a)({},e,{favorites:[...e.favorites],loading:!1});case"REMOVE_FAVORITE":return Object(v.a)({},e,{favorites:e.favorites.filter(e=>e._id!==t._id)});case"LOADING":return Object(v.a)({},e,{loading:!0});default:return e}},O=e=>{e.value;let t=Object(b.a)(e,["value"]);const a=Object(c.useReducer)(g,{posts:[],currentPost:{_id:0,title:"",body:"",author:""},favorites:[],loading:!1}),n=Object(r.a)(a,2),l=n[0],s=n[1];return o.a.createElement(h,Object.assign({value:[l,s]},t))},P=()=>Object(c.useContext)(f);var N=e=>{const t=P(),a=Object(r.a)(t,2),l=a[0],u=a[1];Object(c.useEffect)(()=>{d.getPost(e.match.params.id).then(e=>u({type:"SET_CURRENT_POST",post:e.data})).catch(e=>console.log(e))});return o.a.createElement(o.a.Fragment,null,l.currentPost?o.a.createElement(s,{fluid:!0},o.a.createElement(m,null,o.a.createElement(i,{size:"md-12"},o.a.createElement(p,null,o.a.createElement("h1",null,l.currentPost.title," by ",l.currentPost.author)))),o.a.createElement(m,null,o.a.createElement(i,{size:"md-10 md-offset-1"},o.a.createElement("article",null,o.a.createElement("h1",null,"Content:"),o.a.createElement("p",null,l.currentPost.body))),-1!==l.favorites.indexOf(l.currentPost)?o.a.createElement("button",{className:"btn btn-danger",onClick:()=>{u({type:"REMOVE_FAVORITE",_id:l.currentPost._id})}},"Remove from Favorites!"):o.a.createElement("button",{className:"btn",onClick:()=>{u({type:"ADD_FAVORITE",post:l.currentPost})}},"\u2764 Add to Favorites")),o.a.createElement(m,null,o.a.createElement(i,{size:"md-2"},o.a.createElement(n.b,{to:"/"},"\u2190 Back to Posts")))):o.a.createElement("div",null,"loading..."))};a(54);function _({children:e}){return o.a.createElement("div",{className:"list-overflow-container"},o.a.createElement("ul",{className:"list-group"},e))}function j({children:e}){return o.a.createElement("li",{className:"list-group-item"},e)}a(55);var y=function(e){return o.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")};var T=()=>{const e=P(),t=Object(r.a)(e,2),a=t[0],l=t[1];return Object(c.useEffect)(()=>{l({type:"LOADING"}),l({type:"UPDATE_FAVORITES"})}),o.a.createElement("div",{className:"container mb-5 mt-5"},o.a.createElement("h1",{className:"text-center"},"Here's All of Your Favorite Posts"),a.favorites.length?o.a.createElement(_,null,o.a.createElement("h3",{className:"mb-5 mt-5"},"Click on a post to view in detail"),a.favorites.map(e=>o.a.createElement(j,{key:e._id},o.a.createElement(n.b,{to:"/posts/".concat(e._id)},o.a.createElement("strong",null,e.title," by ",e.author)),o.a.createElement(y,{onClick:()=>{return t=e._id,void l({type:"REMOVE_FAVORITE",_id:t});var t}})))):o.a.createElement("h3",null,"You haven't added any favorites yet!"),o.a.createElement("div",{className:"mt-5"},o.a.createElement(n.b,{to:"home"},"Back to home")))};var A=function(){const e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=P(),l=Object(r.a)(n,2),s=l[0],m=l[1];return o.a.createElement("div",null,o.a.createElement("div",{className:"jumbotron"},o.a.createElement("img",{alt:"blog scrabble",className:"img-fluid img-thumbnail",src:"https://images.pexels.com/photos/459688/pexels-photo-459688.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"})),o.a.createElement("h1",null,"Create a blog post"),o.a.createElement("form",{className:"form-group mt-5 mb-5",onSubmit:n=>{n.preventDefault(),m({type:"LOADING"}),d.savePost({title:e.current.value,body:t.current.value,author:a.current.value}).then(e=>{m({type:"ADD_POST",post:e.data})}).catch(e=>console.log(e)),e.current.value="",t.current.value=""}},o.a.createElement("input",{className:"form-control mb-5",required:!0,ref:e,placeholder:"Title"}),o.a.createElement("textarea",{className:"form-control mb-5",required:!0,ref:t,placeholder:"Body"}),o.a.createElement("input",{className:"form-control mb-5",ref:a,placeholder:"Screen name"}),o.a.createElement("button",{className:"btn btn-success mt-3 mb-5",disabled:s.loading,type:"submit"},"Save Post")))};var R=function(){const e=P(),t=Object(r.a)(e,2),a=t[0],l=t[1];return Object(c.useEffect)(()=>{l({type:"LOADING"}),d.getPosts().then(e=>{l({type:"UPDATE_POSTS",posts:e.data})}).catch(e=>console.log(e))},[]),o.a.createElement("div",null,o.a.createElement("h1",null,"All Blog Posts"),o.a.createElement("h3",{className:"mb-5 mt-5"},"Click on a post to view"),a.posts.length?o.a.createElement(_,null,a.posts.map(e=>o.a.createElement(j,{key:e._id},o.a.createElement(n.b,{to:"/posts/".concat(e._id)},o.a.createElement("strong",null,e.title," by ",e.author)),o.a.createElement(y,{onClick:()=>{return t=e._id,void d.deletePost(t).then(()=>{l({type:"REMOVE_POST",_id:t})}).catch(e=>console.log(e));var t}})))):o.a.createElement("h3",null,"You haven't added any posts yet!"),o.a.createElement("div",{className:"mt-5"},o.a.createElement(n.b,{to:"favorites"},"View favorites")))};var S=()=>o.a.createElement(s,{fluid:!0},o.a.createElement(m,null,o.a.createElement(i,{size:"md-6"},o.a.createElement(A,null)),o.a.createElement(i,{size:"md-6 sm-12"},o.a.createElement(R,null))));var D=function(){const e=P(),t=Object(r.a)(e,1)[0];return o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},o.a.createElement("a",{className:"navbar-brand",href:"/"},"Your personal CMS"),t.loading?o.a.createElement("a",{href:"# ",className:"navbar-brand ml-auto"},"Loading..."):o.a.createElement(o.a.Fragment,null))};var x=()=>o.a.createElement(s,{fluid:!0},o.a.createElement(m,null,o.a.createElement(i,{size:"md-12"},o.a.createElement(p,null,o.a.createElement("h1",null,"404 Page Not Found"),o.a.createElement("h1",null,o.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))));var F=function(){return o.a.createElement(n.a,null,o.a.createElement("div",null,o.a.createElement(O,null,o.a.createElement(D,null),o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",component:S}),o.a.createElement(l.a,{exact:!0,path:"/home",component:S}),o.a.createElement(l.a,{exact:!0,path:"/favorites",component:T}),o.a.createElement(l.a,{exact:!0,path:"/posts/:id",component:N}),o.a.createElement(l.a,{component:x})))))},C=a(28);a.n(C).a.render(o.a.createElement(F,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.c6bee11d.chunk.js.map